<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
		<title>Body Performer</title>
		<!--script src="http://debug.phonegap.com/target/target-script-min.js#rest"></script-->
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&sensor=true"></script>
		<script type="text/javascript" src="js/cordova-2.2.0.js"></script>
		<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
		<script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>   
		<link rel="stylesheet" href="jquery.mobile-1.2.0.min.css" />
		<script type="text/javascript" src="js/jquery.ui.map/jquery.ui.map.full.min.js"></script>
		<script type="text/javascript" src="js/jquery.ui.map/jquery.ui.map.services.min.js"></script>
		<script type="text/javascript" src="js/initDB.js"></script>
		<script type="text/javascript" src="js/DB_weight.js"></script>
		<script type="text/javascript" src="js/trackRoute.js"></script>
		<style>
				.iwContainer {
					width: 130px; 
					height: 50px;
					font-family: Arial, Helvetica, sans-serif;
					font-size: 9px;
				} 
		</style>
		<script type="text/javascript">

			
			var cordovaLoaded = false;
			
			document.addEventListener("deviceready", onDeviceReady, false);
			var watchID = null;
			function onDeviceReady(){
				cordovaLoaded = true;
				initDB();

				
			}
			$('#home').live('pageinit',function(){initDB();});
			//$('#weight_list').on('pageinit',function(){getWeightList();});
			$('#weight_list').live('pageshow',function(){getWeightList();});
			$("#weight_add").live('pageinit', function() {
				$("#changeWeightForm").submit(function(event){
				
				changeWeight();});
				//document.changeWeightForm.submit.click(changeWeightForm());
				
				//$('#changeWeightForm').submit.click(changeWeightForm());
			});
			
			
			//$(document).on('pageinit', '#trackRoute', function(){
			//	onTrackRoute();	
			//});

			var mobileDemo = { 'center': '57.7973333,12.0502107', 'zoom': 10 };
				
			////////////////////////////////////////////////////////////
			
			$('#basic_map').live('pageinit', function() {
				var options = { timeout: 1500, enableHighAccuracy: true };
				watchID = navigator.geolocation.watchPosition(onSuccessTracking, onErrorTracking, options);
				/*
				$('#map_canvas').gmap({'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':true, 'callback': function() {
					var self = this;
					self.addMarker({'position': this.get('map').getCenter() }).click(function() {
						self.openInfoWindow({ 'content': 'Hello World!' }, this);
					});
				}}); 
				*/
			});
			$('#test').live('pageinit', function(){
				var options = { timeout: 1500, enableHighAccuracy: true };
				watchID = navigator.geolocation.watchPosition(onSuccessTracking, onErrorTracking, options);
			});
			
			$('#basic_map').live('pageshow', function() {
				$('#map_canvas').gmap('refresh');
			});
			
			//$('#basic_map').live('pagebeforeshow',function(e,data){ 
			//	$('#map_canvas').height($(window).height() - (10 + $('[data-role=header]').height() - $('[data-role=footer]').height())); 
			//});


			

		</script>

	</head>
	<body>
		<div id="home" data-role="page">
			<div data-role="header">
				<h1>Body Performer</h1>
			</div>
				<!--script type="text/javascript" src="js/index.js"></script>
					<script type="text/javascript">
						app.initialize();
					</script-->
			<div data-role="content">
				<ul data-role="listview" data-inset="true">
					<li>
						<a href="#basic_map">
							<img src="images/63-runner.png" alt="runner" class="ui-li-icon">Track Route
						</a>
					</li>
					<li>
						<a href="#test">
							<img src="images/63-runner.png" alt="runner" class="ui-li-icon">Test
						</a>
					</li>
					<li>
						<a href="#weight_add">
							<img src="images/138-scales.png" alt="scales" class="ui-li-icon">Change weight
						</a>
					</li>
					<li>
						<a href="#weight_list" >
							<img src="images/16-line-chart.png" alt="notepad" class="ui-li-icon">List Weight changes
						</a>
					</li>
					<li>
						<a href="#home">
							<img src="images/20-gear2.png" alt="gear" class="ui-li-icon">Settings
						</a>
					</li>
				</ul>

				<!--p id="geolocation">Finding geolocation...</p-->
			</div>
		</div>
<!--############################################-->		
		<div id="basic_map" data-role="page">
			<div data-role="header">
				<h1>Track Route</h1>
			</div>
			<div data-role="content">	
				<div class="ui-bar-c ui-corner-all ui-shadow" style="padding:0.5em;">
					<div id="map_canvas" style="height:350px;"></div>
				</div>
			</div>
			<div data-role="footer" class="ui-bar" data-position="fixed">
				<a href="#home" data-role="button" data-icon="home">Return</a>
			</div>
		</div>
<!--############################################-->		
		<div id="test" data-role="page">
			<div data-role="header">
				<h1>Test</h1>
			</div>
			<div data-role="content">	
				<div class="ui-bar-c ui-corner-all ui-shadow" style="padding:0.5em;">
					<div id="geolocation"></div>
				</div>
			</div>
			<div data-role="footer" class="ui-bar" data-position="fixed">
				<a href="#home" data-role="button" data-icon="home">Return</a>
			</div>
		</div>

<!--############################################-->	
		<div data-role="page" id="weight_add">

			<div data-role="header">
				<h1>Change Weight</h1>
			</div>

			<div data-role="content">	
				<form id="changeWeightForm" method="post">
					<input type="hidden" name="weightId" id="weightId" value="">
					<div data-role="fieldcontain">
						<label for="weightValue">Weigth:</label>
						<input type="number" name="weightValue" id="weightValue" step="0.01" min="0" />
					</div>
					<!--div data-role="fieldcontain">
							<label for"time">Time</label>
							<input type="time" name="time" id="time" />
					</div-->
					<!--div data-role="fieldcontain">
							<label for"date">Date</label>
							<input type="date" name="date" id="date" />
					</div-->
					<!--div data-role="fieldcontain">
							<label for"datetime">Datetime</label>
							<input type="datetime" name="datetime" id="datetime" />
					</div-->
					
					<!--div data-role="fieldcontain"-->	
						<input type="submit" value="Save Weight"/>
					<!--/div-->
				</form>
			</div>
			
			<div data-role="footer" class="ui-bar" data-position="fixed">
				<a href="#home" data-role="button" data-icon="home">Return</a>
			</div>


		</div>
		
<!--############################################-->	
		<div data-role="page" id="weight_list">

			<div data-role="header">
				<h1>List Weight</h1>
			</div>

			<div data-role="content">	
				<!--div id="wrapper"-->
					<ul id="weightList" data-role="listview" data-inset="true"></ul>
				<!--/div-->

				<div id="busy"/>Loading...</div>

			</div>
			<div data-role="footer" class="ui-bar" data-position="fixed">
				<a href="#home" data-role="button" data-icon="home">Return</a>
			</div>


		</div>
	</body>
</html>